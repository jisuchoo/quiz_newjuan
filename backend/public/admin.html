<table id="scoreTable">
      <thead>
        <tr>
          <th>#</th>
          <th>이름</th>
          <th>담당자(사번)</th> <th>점수</th>
          <th>응시일시</th>
        </tr>
      </thead>
      <tbody>
        </tbody>
    </table>
  </div>

  <script>
    const tbody = document.querySelector("#scoreTable tbody");
    const search = document.getElementById("search");
    const refreshBtn = document.getElementById("refresh-btn");
    let cache = [];

    function render(list) {
      tbody.innerHTML = "";
      list.forEach((r, idx) => {
        const tr = document.createElement("tr");
        
        // 사번이 있으면 굵게 표시, 없으면 '-'
        const refererDisplay = r.referer && r.referer !== "-" 
          ? `<span style="color:#f37321; font-weight:bold;">${r.referer}</span>` 
          : "<span style='color:#ccc;'>-</span>";

        tr.innerHTML = `
          <td>${idx + 1}</td>
          <td>${r.name}</td>
          <td>${refererDisplay}</td> <td><strong>${r.score}</strong></td>
          <td>${r.date}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    // ... (load, search 이벤트 등 나머지 코드는 기존과 동일) ...
    async function load() {
      const res = await fetch("/api/scores");
      const json = await res.json();
      if (!json.ok) {
        alert(json.error || "불러오기에 실패했습니다.");
        return;
      }
      cache = json.data;
      render(cache);
    }
    search.addEventListener("input", () => {
      const q = search.value.trim();
      if (!q) return render(cache);
      const f = cache.filter(x => x.name.includes(q) || (x.referer && x.referer.includes(q))); // 사번으로도 검색 가능하게 추가
      render(f);
    });
    refreshBtn.addEventListener("click", load);
    load();
  </script>
</body>
</html>
